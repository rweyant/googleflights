{
    "contents" : "suppressPackageStartupMessages(library(httr))\nsuppressPackageStartupMessages(library(jsonlite))\nsuppressPackageStartupMessages(library(XML))\nsuppressPackageStartupMessages(library(dplyr))\nsuppressPackageStartupMessages(library(stringr))\n\n#' set Google API key for future functions\n#' @param key your API key\nset_apikey <- function(key) options('googleflightskey'=key)\n\n#' Search QPX for flights\n#' @param origin Departing Airport Code\n#' @param dest Destination Airport Code\n#' @param startDate Departure date (yyyy-mm-dd)\n#' @param startDate Return date (yyyy-mm-dd)\n#' @param numPassengers Number of people traveling\nsearch <- function(origin,dest,startDate,returnDate,numPassengers=1,...){\n\n  base_url <- paste('https://www.googleapis.com/qpxExpress/v1/trips/search?key=',\n                    getOption('googleflightskey'),sep='')\n\n  # Build query\n  query <- list(\n    request=list(\n      passengers=list(adultCount=numPassengers),\n      slice=data.frame(origin=c(origin,dest),destination=c(dest,origin),date=c(startDate,returnDate)))\n    )\n\n  # make Request\n  request <- POST(url = base_url,body=query,encode='json')\n\n  # Check if query was successful\n  if(status_code(r) != 200) stop('Error with request...')\n\n  return(content(r))\n}\n\nsimplify_ <- function(content){\n  names(content$trips)\n  length(content$trips)\n  names(content$trips)\n  content$trips$data$airport[1]\n  tmp <- content$trips$tripOption[1]\n  tmp2 <- tmp[[1]]\n  tmp2$saleTotal\n  tmp3 <- tmp2$slice\n  tmp4 <- tmp3[[1]]\n  tmp4$duration\n\n  content$trips$tripOption\n  content$trips$tripOption[[1]]$saleTotal\n  salePrice <- sapply(content$trips$tripOption,function(x) gsub('USD','',x$saleTotal))\n  content$trips$tripOption[[1]]$slice[[1]]$segment[[1]]$leg[[1]]$origin\n}\n",
    "created" : 1442158517767.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3424265184",
    "id" : "451DE90A",
    "lastKnownWriteTime" : 1442187293,
    "path" : "/media/roberto/Main Storage/Documents/R/packages/googleflights/R/api.R",
    "project_path" : "R/api.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "type" : "r_source"
}